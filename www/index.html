<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
	<link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css"/>
	<script src="https://code.jquery.com/jquery.min.js"></script>
	<script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
	<script src="//developers.kakao.com/sdk/js/kakao.min.js"></script>
	<link rel="stylesheet" href="css/index.css"/>
	      
    <title>파인스킨</title>
    <!-- owl.carousel -->
    <link rel="stylesheet" href="css/owl.carousel.css">
    <link rel="stylesheet" href="css/owl.theme.css">
	<script src="js/owl.carousel.js"></script>
	
	
</head>
<body>
<div data-role="page">
		<div data-role="panel" id="pnlMenu" data-display="overlay">
   			<img src="./img/FineInsightLogo2.jpg" width="100%">
   			<br/>
   			<button id= "goLogin">로그인</button>
   			<button id= "btnLogout">로그아웃</button>
   			<hr/>  
   			
   			<ul data-inset="true" data-role="listview" id="pnlList" >
   				<li><a href="#" >오늘의 피부 날씨</a></li>
   				<li><a href="category/frmCategory.html">피부 정보</a></li>
   				<li><a href="favorite/frmSkinFavorite.html">즐겨찾기</a></li>  
   				<li><a href="http://blog.naver.com/qkrina/221007715663">블로그</a></li>
   				<li><a href="https://play.google.com/store/apps/details?id=com.google.android.googlequicksearchbox">앱 평가하기</a></li>
   			</ul>
   		</div>
   		
    
		<div data-role="header" class="ui-alt-icon ui-nodisc-icon" id="frmHeader">
			<div>
			<a id="topmenu" href = "#pnlMenu" class="ui-btn ui-icon-grid ui-shadow ui-corner-all ui-btn-icon-notext ui-btn-inline"></a>
			<a id="test" href="kakao/kakaolink.html">카카오</a>
			<a id="search" href="#" class="ui-btn ui-icon-search ui-shadow ui-corner-all ui-btn-icon-notext ui-btn-inline"></a>
			</div>
		</div>
      
		<div data-role="footer" data-position="fixed" id="frmFooter">
			<div data-role="navbar" data-iconpos="top">
				<ul>
					<li><a id="weather" href="weather/frmWeather.html" >피부날씨</a></li>  <!--  class="ui-btn-active" -->
					<li><a href="category/frmCategory.html" >피부정보</a></li>
					<li><a href="favorite/frmSkinFavorite.html" >즐겨찾기</a></li>
				</ul>
			</div>
		</div>
</div>
		<script type="text/javascript" src="cordova.js"></script>
		<script src="js/PhonegapPush.js"></script>
 	    <script src = "https://www.gstatic.com/firebasejs/live/3.1/firebase.js"></script>
        <script src="https://www.gstatic.com/firebasejs/4.1.2/firebase.js"></script>
       
        	<!-- <script src="../js/FirebaseLogin.js"></script>-->
        	<script type="text/javascript">
        	app.initialize();
        	
        	
        	const config = 
		 {
        		    apiKey: "AIzaSyBE5vMFfd91z_MXwb1CeBKsZWQEYPisY9s",
        		    authDomain: "thisskin-ios-fe4b6.firebaseapp.com",
        		    databaseURL: "https://thisskin-ios-fe4b6.firebaseio.com",
        		    projectId: "thisskin-ios-fe4b6",
        		    storageBucket: "thisskin-ios-fe4b6.appspot.com",
        		    messagingSenderId: "253616346483"
			  };
			  firebase.initializeApp(config);
        	
			  const messaging = firebase.messaging();
	            messaging.requestPermission()
	            .then(function()
	            		{
	            			console.log('Have Permission');
	            			return messaging.getToken();
	            		}) 
	            	.then(function(token)
	            		{
	            			console.log(token);
	            		}) 
	            	.catch(function(err)
	            		{
	            				console.log('Err Occured');
	            		})
	            messaging.onMessage(function(playload)
	            		{    
	            			colole.log("onMessage: " , playload);
	            		})
			  
	               
	          //Firebase Login or Logout Status
			  firebase.auth().onAuthStateChanged(firebaseUser => 
			  {
				  if(firebaseUser)
					  {
					  	console.log(firebaseUser);
					  	$("#goLogin").hide();
					  	$("#btnLogout").show();
					  }
				  else
					  {
					  	console.log("not logged in");
					  	$("#goLogin").show();
					  	$("#btnLogout").hide();
					  }
			  })
			  const goLogin = document.getElementById("goLogin");
			  const btnLogout = document.getElementById("btnLogout");
			  
			  
			  //Login Click
			  goLogin.addEventListener("click", e =>
			  {
				  location.href = "login/loginmain.html"
			  })
			  
			  
			  //Logout Click
			  btnLogout.addEventListener("click", e=>
			  {
				  firebase.auth().signOut();
			  })
		</script>
</body>
</html>